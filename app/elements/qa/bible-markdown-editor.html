<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="./bible-markdown.html">

<dom-module id="bible-markdown-editor">
  <template>
    <style include="shared-styles"></style>
    <style>
      :host {
        display: block;
      }
      .questionEditor{
        width: 100%;
        display: flex;
      }
      .questionEditor > div{
        flex: 1;
      }
      #preview{
        margin: 10px;
        background: var(--accent-color-50);
        padding: 0px 10px;
      }

      @media all and (orientation: portrait) {
        .questionEditor{
          flex-direction: column;
        }
      }
    </style>
    <div class="questionEditor">
      <div>
        <paper-textarea value="{{value}}" label="{{label}}" rows="{{rows}}" always-float-label="{{_labelPresent}}" no-label-float="{{!_labelPresent}}"></paper-textarea>
      </div>
      <div id="preview">
        <bible-markdown markdown="{{value}}"></bible-markdown>
        <!--
        <marked-element markdown="{{value}}">
          <div class="markdown-html"></div>
        </marked-element>
        -->
        <content select="*"></content>
      </div>
    </div>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'bible-markdown-editor',

        properties: {
          label: {
            type: String,
            value: ''
          },
          rows: {
            type: Number,
            value: 5
          },
          value: {
            type: String,
            notify: true
          }
        },
        observers: [
          'labelChanged(label)'
        ],
        labelChanged: function(label){
          this.set('_labelPresent', label.length > 0);
        }
      });
    })();
  </script>

</dom-module>
